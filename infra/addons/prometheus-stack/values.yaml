prometheus:
  prometheusSpec:
    serviceMonitorSelectorNilUsesHelmValues: false
    serviceMonitorSelector:
      matchLabels:
        prometheus: prometheus-stack
    podMonitorSelector:
      matchLabels:
        prometheus: prometheus-stack
    resources:
      requests:
        cpu: "200m"
        memory: "1Gi"
      limits:
        memory: "2Gi"
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: standard
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 10Gi
    additionalServiceMonitors:
      - name: prometheus-node-exporter-dev
        selector:
          matchLabels:
            app.kubernetes.io/name: prometheus-node-exporter
            app.kubernetes.io/instance: prometheus-node-exporter-dev
        namespaceSelector:
          matchNames:
            - dev
        endpoints:
          - port: metrics
            interval: 15s
            targetPort: 9103
        additionalLabels:
          prometheus: prometheus-stack
grafana:
  adminPassword: newpassword123
  persistence:
    enabled: true
    storageClassName: standard
    accessModes: ["ReadWriteOnce"]
    size: 5Gi
  grafana.ini:
    auth.anonymous:
      enabled: true
      org_role: Viewer
  additionalDataSources:
    - name: Loki
      type: loki
      url: http://loki.dev.svc.cluster.local:3100
      access: proxy
      isDefault: false
    - name: Tempo
      type: tempo
      url: http://grafana-tempo-dev.dev.svc.cluster.local:3100
      access: proxy
      isDefault: false
      jsonData:
        httpMethod: GET
        tracesToLogs:
          datasourceUid: "loki"
          spanStartTimeShift: "-1h"
          spanEndTimeShift: "1h"
        tracesToMetrics:
          datasourceUid: "prometheus"
prometheus-node-exporter:
  enabled: true
  extraArgs:
    - --collector.disable-defaults
    - --collector.cpu
    - --collector.meminfo
    - --collector.diskstats
app:
  serviceMonitors:
    - name: sharkapp-backend
      namespace: dev
      selector:
        matchLabels:
          app: backend-dev
      endpoints:
        - port: http
          path: /metrics
          interval: 15s
          targetPort: 8080
          relabelings:
            - sourceLabels: [__meta_kubernetes_pod_label_app]
              targetLabel: app
            - sourceLabels: [__meta_kubernetes_pod_namespace]
              targetLabel: namespace
    - name: sharkapp-frontend
      namespace: dev
      selector:
        matchLabels:
          app: frontend-dev
      endpoints:
        - port: http
          path: /metrics
          interval: 15s
          targetPort: 8080
          relabelings:
            - sourceLabels: [__meta_kubernetes_pod_label_app]
              targetLabel: app
            - sourceLabels: [__meta_kubernetes_pod_namespace]
              targetLabel: namespace


