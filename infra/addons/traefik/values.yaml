# Traefik Helm Chart Configuration
# Official Traefik chart values for Gateway API support

# Global configuration
globalArguments:
  - "--global.checknewversion=false"
  - "--global.sendanonymoususage=false"
  - "--providers.kubernetesgateway"
  - "--providers.kubernetescrd"
  - "--api.dashboard=true"
  - "--api.insecure=true"
  - "--metrics.prometheus=true"
  - "--accesslog=true"
  - "--log.level=INFO"
  - "--ping=true"

# Deployment configuration
deployment:
  replicas: 1

# Service configuration
service:
  enabled: true
  type: ClusterIP

# Ports configuration
ports:
  traefik:
    port: 9000
    expose: true
    exposedPort: 9000
  web:
    port: 8000
    expose: true
    exposedPort: 80
  websecure:
    port: 8443
    expose: true
    exposedPort: 443
    tls:
      enabled: true

# Dashboard configuration
ingressRoute:
  dashboard:
    enabled: true
    matchRule: Host(`traefik.local`)
    entryPoints: ["web"]

# Enable experimental Gateway API
experimental:
  gatewayAPI:
    enabled: true

# Resource limits
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 300m
    memory: 256Mi

# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 65532
  runAsGroup: 65532
  readOnlyRootFilesystem: true
  capabilities:
    drop: ["ALL"]

podSecurityContext:
  fsGroup: 65532